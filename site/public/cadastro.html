<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="./assets/img/world-cup.png" type="image/x-icon">

    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/register.css">

    <title>Register</title>
    
</head>
<body>
    
    <section class="container" id="container">
        <div class="background" id="background">

        </div>
        <div class="box1" id="box1" style="display: flex;">
            <div class="circle">
                <span class="dot1"></span>
                <span class="dot3"></span>
            </div>
            <div class="formulario">
                <div class="titleDescription">
                    <div class="back">
                        <h1>Seja bem-vindo!</h1>
                        <a href="./"><img src="./assets/img/login/backbutton.png" alt=""></a>
                    </div>
                    <p>Juntos pela glória eterna!</p>
                </div>
                <div class="input">
                    <div class="divInputNome">
                        <div class="nome">
                            <label for="">Nome:</label>
                            <input type="text" id="inNome" placeholder="Nome">
                        </div>
                        <div class="sobrenome">
                            <label for="Sobrenome">Sobrenome:</label>
                            <input type="text" id="inSobrenome" placeholder="Sobrenome">
                        </div>
                    </div>
                    <div class="divInput">
                        <label for="">Email:</label>
                        <input type="email" id="inEmail" placeholder="diego.vieira@sptech.school">
                    </div>
                    <div class="divInput">
                        <label for="">Senha:</label>
                        <input type="password" id="inPass" placeholder="*********">
                    </div>
                    <div class="divInput">
                        <label for="">Confirmar Senha:</label>
                        <input type="password" id="inPassConfirm" placeholder="*********">
                    </div>
                    <div class="forgotPassword">
                        <!-- <div class="forgot">
                            <input type="checkbox">
                            <label for="">Concordo com os <a href="">Termos de Uso</a></label>
                        </div> -->
                        <!-- <p>Esqueci a Senha</p> -->
                    </div>
                    <div class="button">
                        <button class="buttonFe" onclick="prosseguir()">PROSSEGUIR</button>
                    </div>
                </div>
                        <p>Já tem conta? <a class="a-register" href="./login.html">Logue</a></p>
            </div>
        </div>

        <div class="box2" id="box2" style="display: none;">
            <div class="circle">
                <span class="dot3"></span>
                <span class="dot2"></span>
            </div>
            <div class="formulario">
                <div class="titleDescription">
                    <div class="back">
                        <h1>Seja bem-vindo!</h1>
                        <a onclick="voltar()"><img src="./assets/img/login/backbutton.png" alt=""></a>
                    </div>
                    <p>Juntos pela glória eterna!</p>
                </div>
                <div class="input">
                    
                    <div class="divInput">
                        <label for="">Selecione uma Seleção:</label>
                        <div class="divSelecao">
                            <select name="" id="selSelecao" onchange="selecao()">
                                <option value="0"></option>
                                <option value="1">Alemanha</option>
                                <option value="2">Arábia Saudita</option>
                                <option value="3">Argentina</option>
                                <option value="4">Austrália</option>
                                <option value="5">Bélgica</option>
                                <option value="6">Brasil</option>
                                <option value="7">Camarões</option>
                                <option value="8">Canadá</option>
                                <option value="9">Catar</option>
                                <option value="10">Coreia do Sul</option>
                                <option value="11">Costa Rica</option>
                                <option value="12">Croácia</option>
                                <option value="13">Dinamarca</option>
                                <option value="14">Equador</option>
                                <option value="15">Espanha</option>
                                <option value="16">Estados Unidos</option>
                                <option value="17">França</option>
                                <option value="18">Gana</option>
                                <option value="19">Holanda</option>
                                <option value="20">Inglaterra</option>
                                <option value="21">Irã</option>
                                <option value="22">Japão</option>
                                <option value="23">Marrocos</option>
                                <option value="24">México</option>
                                <option value="25">País de Gales</option>
                                <option value="26">Polônia</option>
                                <option value="27">Portugal</option>
                                <option value="28">Senegal</option>
                                <option value="29">Sérvia</option>
                                <option value="30">Suíça</option>
                                <option value="31">Tunísia</option>
                                <option value="32">Uruguai</option>
                            </select>

                            <div class="divImg">
                                <img id="images" src="./assets/img/selecao/0.png" alt="Flag">
                            </div>

                        </div>
                    </div>
                    <br>
                    <!-- <div class="divInput">
                        <label for="">Selecione um idolo:</label>
                        <div class="divSelecao">
                            <select name="" id="selIdolo">
                                <option value="0"></option>
                                <option value="1">Neymar</option>
                                <option value="2">Ronaldo Fenomeno</option>
                                <option value="3">Kaka</option>
                                <option value="4">Cristiano Ronaldo</option>
                                <option value="5">Messi</option>
                                <option value="6">Ronaldinho Gaucho</option>
                                <option value="7">Puyol</option>
                                <option value="8">Neuer</option>
                            </select>
                        </div>
                    </div> -->
                    <br>
                    <!-- <div class="forgotPassword">
                        <div class="forgot">
                            <input type="checkbox">
                            <label for="">Concordo com os <a href="">Termos de Uso</a></label>
                        </div>
                        <p>Esqueci a Senha</p>
                    </div> -->
                    <div class="button">
                        <button class="buttonFe" onclick="cadastrar()">CADASTRAR</button>
                    </div>
                </div>
                        <p>Já tem conta? <a class="a-register" href="./login.html">Logue</a></p>
            </div>
        </div>
    </section>

</body>

    <script src="js/register.js"></script>
    <script src="./js/img.js"></script>
    
</html>

<script>
    

    function cadastrar() {
    // aguardar();

    //Recupere o valor da nova input pelo nome do id
    // Agora vá para o método fetch logo abaixo
    var nomeVar = inNome.value;
    var sobreVar = inSobrenome.value;
    var emailVar = inEmail.value;
    var senhaVar = inPass.value;
    var confirmacaoSenhaVar = inPassConfirm.value;
    var selecaoVar = selSelecao.value;
    var idoloVar = selIdolo.value;
    

    if (nomeVar == "" || emailVar == "" || senhaVar == "" || confirmacaoSenhaVar == "" || sobreVar == "" || selecaoVar == '0' || idoloVar == '0') {
        // cardErro.style.display = "block"
        // mensagem_erro.innerHTML = "(Mensagem de erro para todos os campos em branco)";
        alert('Não foi possível realizar o cadastro, verifique as credenciais!')
        // finalizarAguardar();
        return false;
    }
    /* else {
        setInterval(sumirMensagem, 5000)
    } */

    // Enviando o valor da nova input
    fetch("/usuarios/cadastrar", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            // crie um atributo que recebe o valor recuperado aqui
            // Agora vá para o arquivo routes/usuario.js
            nomeServer: nomeVar,
            sobreServer: sobreVar,
            emailServer: emailVar,
            senhaServer: senhaVar,
            selecaoServer: selecaoVar,
            idoloServer: idoloVar,
        })
    }).then(function (resposta) {

        console.log("resposta: ", resposta);

        if (resposta.ok) {
            // cardErro.style.display = "block";

            // mensagem_erro.innerHTML = "Cadastro realizado com sucesso! Redirecionando para tela de Login...";

            select();

            setTimeout(() => {
                window.location = "login.html";
            }, "2000")
            
            /* limparFormulario(); */
            // finalizarAguardar();
        } else {
            alert('Não foi possível realizar o cadastro, verifique as credenciais!')
            throw ("Houve um erro ao tentar realizar o cadastro!");
        }
    }).catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
        // finalizarAguardar();
    });

        return false;
    }


    function select() {
        var sel = selIdolo.value;

        if  (sel == '0') {

        } else {
            sel.length
        }

    }
</script>