<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="./assets/img/world-cup.png" type="image/x-icon">

    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/register.css">

    <title>Register</title>
    
</head>
<body>
    
    <section class="container" id="container">
        <div class="background" id="background">

        </div>
        <div class="box">
            <div class="circle">
                <span class="dot1"></span>
                <span class="dot2"></span>
                <span class="dot3"></span>
            </div>
            <div class="formulario">
                <div class="title-description">
                    <div class="back">
                        <h1>Seja bem-vindo!</h1>
                        <a href="./"><img src="./assets/img/login/button-back.png" alt=""></a>
                    </div>
                    <p>Juntos pela glória eterna!</p>
                </div>
                <div class="input">
                    <div class="div_inputNome">
                        <div class="nome">
                            <label for="">Nome:</label>
                            <input type="text" id="inNome" placeholder="Nome">
                        </div>
                        <div class="sobrenome">
                            <label for="Sobrenome">Sobrenome:</label>
                            <input type="text" id="inSobrenome" placeholder="Sobrenome">
                        </div>
                    </div>
                    <div class="div_input">
                        <label for="">Email:</label>
                        <input type="email" id="inEmail" placeholder="diego.vieira@sptech.school">
                    </div>
                    <div class="div_input">
                        <label for="">Senha:</label>
                        <input type="password" id="inPass" placeholder="*********">
                    </div>
                    <div class="div_input">
                        <label for="">Confirmar Senha:</label>
                        <input type="password" id="inPassConfirm" placeholder="*********">
                    </div>
                    <div class="forgot-password">
                        <div class="forgot">
                            <input type="checkbox">
                            <label for="">Concordo com os <a href="">Termos de Uso</a></label>
                        </div>
                        <!-- <p>Esqueci a Senha</p> -->
                    </div>
                    <div class="button">
                        <button class="button-fe" onclick="cadastrar()">PROSSEGUIR</button>
                    </div>
                </div>
                        <p>Já tem conta? <a class="a-register" href="./login.html">Logue</a></p>
            </div>
        </div>
    </section>

</body>
    <script src="js/register.js"></script>
    <!-- <script src="./js/img.js"></script> -->
</html>

<script>

/*     function prosseguir1() {
        var displayCont = document.querySelector(".container")

        displayCont.classList.toggle('ativo')

        var displayCont2 = document.querySelector(".container2")

        displayCont2.classList.toggle('ativo')
    }
 */
    function prosseguir1() {
        container.style.display = "none"
        container2.style.display = "flex"
    }

    function prosseguir2() {
        container2.style.display = "none"
        container3.style.display = "flex"
    }
    
</script>
<script>
    function cadastrar() {
    // aguardar();

    //Recupere o valor da nova input pelo nome do id
    // Agora vá para o método fetch logo abaixo
    var nomeVar = inNome.value;
    var sobreVar = inSobrenome.value;
    var emailVar = inEmail.value;
    var senhaVar = inPass.value;
    var confirmacaoSenhaVar = inPassConfirm.value;
    

    if (nomeVar == "" || emailVar == "" || senhaVar == "" || confirmacaoSenhaVar == "" || sobreVar == "") {
        // cardErro.style.display = "block"
        // mensagem_erro.innerHTML = "(Mensagem de erro para todos os campos em branco)";

        // finalizarAguardar();
        return false;
    }
    /* else {
        setInterval(sumirMensagem, 5000)
    } */

    // Enviando o valor da nova input
    fetch("/usuarios/cadastrar", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            // crie um atributo que recebe o valor recuperado aqui
            // Agora vá para o arquivo routes/usuario.js
            nomeServer: nomeVar,
            sobreServer: sobreVar,
            emailServer: emailVar,
            senhaServer: senhaVar
        })
    }).then(function (resposta) {

        console.log("resposta: ", resposta);

        if (resposta.ok) {
            // cardErro.style.display = "block";

            // mensagem_erro.innerHTML = "Cadastro realizado com sucesso! Redirecionando para tela de Login...";

            setTimeout(() => {
                window.location = "login.html";
            }, "2000")
            
            /* limparFormulario(); */
            // finalizarAguardar();
        } else {
            throw ("Houve um erro ao tentar realizar o cadastro!");
        }
    }).catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
        // finalizarAguardar();
    });

    return false;
}
</script>